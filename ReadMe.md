TASK 2
Задание 1 – добавление в проект записи выходного видеофайла
Дополнить пример приложения на Си++ с использованием OpenCV возможностью записи
выходного видеофайла. Типичные результаты обработки часто представляются в двух видах – как
отдельные изображения (часто с прореживанием) и как видеофайл, в котором результирующие
изображения могут комбинироваться с дополнительными графическими элементами (отрезками,
окружностями, прямоугольниками и т.п.).
С использованием примера 2.11 из справочника по OpenCV добавить в свое приложение
создание объекта VideoWriter для записи видеофайла. При открытии этого объекта на запись
указать формат MP4 (MJPG) и размеры кадра и частоту, соответствующие входным изображениям
(их можно запросить методом VideoCapture::get, как и сделано в примере 2.11).
Запустить тестовое приложение, обработать всю видеопоследовательность тестовым
алгоритмом (оператор Кэнни) и убедиться, что все кадры с результатами обработки сохранены в
результирующем видеофайле.
Задание 2 – выделение линии горизонта с помощью алгоритма Кэнни
Использовать видеофайл с движением по заснеженной дороге:

Подобрать параметры оператора Кэнни, при которых выполняется устойчивое выделение
линии горизонта и сформировать выходной видеофайл с результатами обработки. Кроме линии
горизонта, на изображении могут присутствовать и другие контрастные контуры. Вычислить
среднее время обработки кадра.
Повторить обработку, после загрузки кадра уменьшая его размеры в 4 раза (до 400х300
пикселов). Функция OpenCV: cv::resize(). Для этого варианта обработки также сформировать
видеофайл. Подходят ли для обработки уменьшенного изображения те же настройки алгоритма,
которые применялись на полном кадре? Вычислить среднее время обработки кадра. Сравнить со
временем обработки в первом случае. Дополнительно оценить время на вызов функции
Прислать по почте результаты: проект – файлы *.cpp/*.h; *.sln; *.vxproj.* (без служебных
папок .vs, x64, Debug/Release), два видеофайла (в исходном и уменьшенном разрешении) и оценки
быстродействия обработки для двух разрешений.

##TASK 3
Выполнить задание 2.3 (из предыдущего практического задания) по построению
комбинированных кадров с результатами обработки.
Задание 1 – определение области интереса в кадре
Использовать ту же видеопоследовательность, которая была в задании 2 (движение по
заснеженной дороге) и результаты выполнения заданий 2.2 и 2.3.
Реализовать вычисление области интереса, содержащей земную поверхность (без частей
автомобиля и неба). Эта область интереса выглядит примерно следующим образом:
Для последующей обработки области земной поверхности не обязательно точно
воспроизводить форму линии горизонта и лини капота. Можно ограничиться приближением
области интереса в виде прямоугольника, например, такого вида:
Для вычисления этой области интереса надо найти нижнюю точку линии горизонта (в
верхней части кадра) и верхнюю точку линии капота (в нижней части кадра). Результаты
вычислений использовать для формирования выходного видеофайла. Область интереса можно
показывать в виде прямоугольника-рамки, а не полупрозрачного прямоугольника, как на
иллюстрации выше. В целом, результаты могут выглядеть примерно так (включают и
обнаруженные контуры, и область интереса)

##TASK 4
Использовать результаты задания 3 или, если не получилось – вручную задать координаты
области интереса для обработки.
Задание 1 – вычисление точечных признаков
На видеопоследовательности выполнить вычисление точечных признаков Харриса
(угловых признаков) на подстилающей поверхности (т.е. внутри обнаруженной области интереса).
(Описание – «Нахождение углов» и функция goodFeaturesToTrack(), стр.419, справочник по
OpenCV). Сформировать выходной файл (исходные цветные кадры с наложением маркеров для
угловых признаков, например, небольших окружностей) и текстовый файл (в каждой строке –
номер кадра и количество обнаруженных признаков). Цель задания – выяснить, можно ли
обнаружить признаковые точки для прослеживания на сложной малоконтрастной подстилающей
поверхности.
Задание 2 – вычисление точечных признаков с предобработкой
Перед вычислением точечных признаков выполнить операцию предобработки –
эквализацию гистограммы в пределах области интереса (не на всем кадре) (Описание – стр. 284
справочника по
OpenCV). После этого повторить вычисление точечных признаков на
эквализованном изображении области интереса. В выходной видеофайл поместить изображения –
наложение и области интереса, и точечных признаков на исходный цветной кадр. Также
сформировать текстовый файл с количеством признаков на каждом кадре. Цель задания –
выяснить, как зависит количество точечных признаков от распределения яркости на
обрабатываемом изображении.
Задание 3 – графики для оценки количества обнаруженных признаков
В Excel (или еще в чем-то) на одном графике показать результаты заданий 1 и 2
(зависимость количества обнаруженных признаков от номера кадра) для сравнения. Для этого
можно сформированные текстовые файлы импортировать в Excel.
